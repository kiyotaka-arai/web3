// https://v4.webpack.js.org/
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// webpackå…¬å¼
// ã“ã“ã«extã‚ã£ãŸ
// https://www.npmjs.com/
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼
// npmå…¬å¼

// æœ€çµ‚çš„ã«ã¯node.jsã§å®Œçµã™ã‚‹ä»•çµ„ã¿ã«ã™ã‚‹ã‹ã€œï¼ˆã‚»ãƒ«ãƒ•ï¼‰
// æœ€çµ‚çš„ã«ã¯node.jsã§å®Œçµã™ã‚‹ä»•çµ„ã¿ã«ã™ã‚‹ã‹ã€œï¼ˆã‚»ãƒ«ãƒ•ï¼‰
// æœ€çµ‚çš„ã«ã¯node.jsã§å®Œçµã™ã‚‹ä»•çµ„ã¿ã«ã™ã‚‹ã‹ã€œï¼ˆã‚»ãƒ«ãƒ•ï¼‰
// https://github.com/dc7290/ejs-wepack-template
// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ã«ejsã‚’æ¡ç”¨ã—ãŸwebpackã®ã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã‚­ãƒƒãƒˆã§ã™ã€‚
// ?webpã„ã„ã­
// https://qiita.com/kn1cht/items/d3fcd3376ab3461bf05a
// webpackã§é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿(EJSç·¨)
// é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã£ã¦ã®ãŒã‚ˆãã‚ã‹ã‚‰ã‚“
// ãƒšãƒ¼ã‚¸ã®æ•°ã ã‘HtmlWebpackPluginã‚’å¢—ã‚„ã•ãªãã¦ã„ã„ã‚ˆã†ã«ã™ã‚‹
// https://zenn.dev/syamozipc/articles/webpack_note
// ã€ãƒ¡ãƒ¢ã€‘webpackè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãæ–¹
// ã“ã‚Œçµæ§‹å‚è€ƒã«ã—ãŸãª
// https://kajindowsxp.com/webpack-ejs-to-html/
// ç¥é™è‡¨ã—ã¦ã‚‹
// ã‚³ãƒãƒ³ãƒ‰åˆ†ã‘ãŸæ–¹ãŒã„ã„ã®ã‹ãªã€œ
// https://yumegori.com/webpack5-setting-method
// ãƒ¬ãƒ™ãƒ«é«˜ã‡â€¦ï¼ï¼œ
// scssã®ã¨ã“ãªã«ã—ã¦ã‚“ã®ã“ã‚Œ
// ã“ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ¼”ç®—å­ãªã‚“ãªã‚“ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
// https://chocolateorange.github.io/2017/02/04/02/
// webpackã§JavaScriptã‚’ç”Ÿæˆã›ãšã«HTMLã‚„CSSã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã€‚Extract Text Pluginã‚’ä½¿ã£ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€è©¦ã—ã¦ã¿ãŸã‹ã£ãŸã€‚
// https://homeworks.cloud/post-320/
// scssã‚‚ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã«å«ã‚ã¦ã‚“ã®ã“ã‚Œï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
// scssã‚‚ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã«ãªã‚Šãˆã‚‹ã®ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
// webpackã‚’åˆ©ç”¨ã—ã¦ã¿ã‚‹ï¼ˆå…¥é–€ç·¨ï¼‰
// https://www.mitsue.co.jp/knowledge/blog/frontend/201912/05_0000.html#:~:text=%E3%82%A8%E3%83%B3%E3%83%88%E3%83%AA%E3%83%BC%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%A8%E3%81%AF%E3%80%81%E4%BE%9D%E5%AD%98,%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%83%BB%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%81%BE%E3%81%99%E3%80%82
// æ®‹å¿µãªãŒã‚‰JavaScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆimportãƒ»exportï¼‰ã¯ãƒ¬ã‚¬ã‚·ãƒ¼ãªãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚
// webpackã‚’ä½¿ç”¨ã—ã¦ãã†ã„ã£ãŸãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚è§£é‡ˆã§ãã‚‹å½¢ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
// ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ã®ãŒå¾Œè¿°ã™ã‚‹ãƒ­ãƒ¼ãƒ€ãƒ¼ã§ã™ã€‚
// https://zenn.dev/rik9228/articles/256d26cbfcaf1e
// node.jsã§ç”»åƒã®åœ§ç¸®ã¨webpç”Ÿæˆã‚’è‡ªå‹•åŒ–ã™ã‚‹

// pathãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã¯
// ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã‚‚ä½¿ã‚ã‚Œã‚‹Node.jsã¨ã„ã†JavaScriptã®å®Ÿè¡Œç’°å¢ƒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®Node.jsã«æ¨™æº–ã§å…¥ã£ã¦ã„ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®1ã¤ãŒpathãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã™ã€‚
// pathãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‹ã‚‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’å–å¾—ã—ãŸã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«åã ã‘ã‚’å–å¾—ã—ãŸã‚Šã™ã‚‹ã‚ˆã†ãªæ–‡å­—åˆ—ã¨ã—ã¦ã® ãƒ‘ã‚¹ã®æ“ä½œãŒã§ãã¾ã™ã€‚
// Node.jsã«æ¨™æº–ã§å…¥ã£ã¦ã„ã‚‹ã®ã§ä¸‹è¨˜ã®ã‚ˆã†ã«requireã§èª­ã¿è¾¼ã‚ã¾ã™ã€‚
// require('path')
// èª­ã¿è¾¼ã‚“ã å¾Œã¯ã€pathã‚’ä»£å…¥ã—ãŸå¤‰æ•°ã‹ã‚‰pathã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ãƒ‘ã‚¹ã®æ–‡å­—åˆ—ã‚’æ“ä½œã™ã‚‹ã„ã‚ã„ã‚ãªå‡¦ç†ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚
// pathã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä¸‹è¨˜ã®å…¬å¼ã‚µã‚¤ãƒˆã§ã”ç¢ºèªãã ã•ã„ã€‚

// ãã‚‚ãã‚‚pathã£ã¦npm installã¨ã‹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„ã‚“ã§ã™ã‘ã©ã£ã¦æ„Ÿã˜ãªã‚“ã ã‘ã©ãªãœã‹ä½¿ãˆã‚‹ã€‚ã€‚
// â‡’ã“ã‚Œã¯Nodeã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã½ãã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ã‚‹ã¿ãŸã„ã€‚

// require
// Node.jsã«ãŠã‘ã‚‹requireã¯ã€npmã§èª­ã¿è¾¼ã‚“ã ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¯¾ã—ã¦JavaScriptå´ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚

const path = require('path');
// â‡’ã“ã‚Œã¯Nodeã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã½ãã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ã‚‹ã¿ãŸã„ã€‚
// è¦ã¯require(â€˜pathâ€™)ã‚’æ›¸ãã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã«ä»‹å…¥ï¼ˆæ“ä½œï¼‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‚‰ã—ã„ã€‚ä¾‹ãˆã°ã€path.resolveã¨ã„ã†é–¢æ•°ã ã¨ã€çµ¶å¯¾ãƒ‘ã‚¹ã«å¤‰æ›ã—ã¦ãã‚Œã‚‹ã¿ãŸã„ã€‚
// pathãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ã¨ãã«å–ã‚Šè¾¼ã‚“ã§ã¦ãã‚Œã‚‹ã‚“ã ã­
// ä½•è¨€ã£ã¦ã‚‹ã®ã‹ã‚ã‹ã‚‰ã‚“
// path ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åŸºæœ¬
// ã“ã¡ã‚‰ã¯ãŠã¾ã‘ã€‚
// ã€Œãã‚‚ãã‚‚ path ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã£ã¦ãªã«ã‚’ã—ã¦ãã‚Œã‚‹ã‚‚ã‚“ãªã®ï¼Ÿã€ã¨ã„ã†ç–‘å•ãŒã‚ã£ãŸã®ã§ã€ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚èª¿ã¹ã¦ã¿ãŸã€‚ã–ã£ã¨è¦‹ã‚‹ã ã‘ã§ã€Œã‚ã€œ path ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã£ã¦ã“ã‚“ãªæ„Ÿã˜ã®ã“ã¨ã‚’ã—ã¦ãã‚Œã‚‹ã‚„ã¤ãªã®ã­ã€œã€ã¨çŸ¥ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã€‚
// path.dirname()
// path.dirname()ã¯åå‰ã‹ã‚‰æƒ³åƒã§ãã‚‹ã¨ãŠã‚Šã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã‚’å–å¾—ã™ã‚‹ã€‚
// ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§REPLã‚’èµ·å‹•ã—ã¦æŒ™å‹•ã‚’ç¢ºã‹ã‚ã¦ã¿ã‚‹ã€‚
// const { CleanWebpackPlugin } = require('clean-webpack-plugin');
// å‡ºåŠ›å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã™
const TerserPlugin = require('terser-webpack-plugin');
// ã“ã‚Œä½¿ã†ã¨
// * jQuery JavaScript Library v3.5.1
// â†‘ã“ã‚“ãªæ„Ÿã˜ã®å†…å®¹ã®txtãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã‚Œãªã„ã‚ˆã†ã«ãªã‚‹
const MiniCssExtractPlugin = require("mini-css-extract-plugin");

const BrowserSyncPlugin = require('browser-sync-webpack-plugin');

// const CopyPlugin = require('copy-webpack-plugin');
// const ImageminPlugin = require('imagemin-webpack-plugin').default;
// const imagemin = require("imagemin-keep-folder");
// const ImageminMozjpeg = require('imagemin-mozjpeg');
const HtmlWebpackPlugin = require("html-webpack-plugin");

const imagemin = require('imagemin-keep-folder');
const imageminMozjpeg = require('imagemin-mozjpeg');
const imageminPngquant = require('imagemin-pngquant');
const imageminGifsicle = require('imagemin-gifsicle');
// const imageminSvgo = require('imagemin-svgo');

// module.exports = {
//   mode: 'development',
//   //  bundle.jsã®ã€Œ* ATTENTIONä»¥é™ã€œã€ã®é•·å¤§ãªè¨˜è¿°ã¯ã“ã‚Œã«ã‚ˆã£ã¦ç”Ÿã˜ã¦ã‚‹ã‚‰ã—ã„
//   entry: './src/js/app.js',
//   output: {
//     path: path.resolve(__dirname, 'public'),
//     filename: 'js/bundle.js',
//   },
// };

// Loaders
// webpackè‡ªèº«ã¯JavaScriptã—ã‹ç†è§£ã§ãã¾ã›ã‚“ãŒã€Loaderã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦JavaScriptä»¥å¤–ã®ã‚‚ã®ã‚‚å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã©ã®ã‚ˆã†ãªç¨®é¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã£ã¦ã‚‚webpackãŒå‡¦ç†ã§ãã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«LoaderãŒå¤‰æ›ã—ã¦ãã‚Œã‚‹ã“ã¨ã§ã€webpackãŒbundleãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚(ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ãŒwebpackã®æ ¹æœ¬çš„ãªä»•çµ„ã¿ã§ã™)
// Loaderã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãª2ã¤ã®ç›®çš„ãŒã‚ã‚Šã¾ã™ã€‚

// testãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æ‹¡å¼µå­ã‚’æŒ‡å®šã—ã¦ã€ã‚ã‚‹LoaderãŒã©ã®ã‚ˆã†ãªç¨®é¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†ã™ã‚‹ã¹ããªã®ã‹ç‰¹å®šã™ã‚‹(æ­£è¦è¡¨ç¾ã§æ‹¡å¼µå­ã‚’æŒ‡å®š)
// useãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«Loaderã‚’æŒ‡å®šã—ã¦ã€testãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¾å­˜é–¢ä¿‚ã‚„æœ€çµ‚çš„ãªbundleãƒ•ã‚¡ã‚¤ãƒ«ã«åŠ ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«å¤‰æ›ã™ã‚‹

// ã“ã®å ´åˆã®æŒ‡å®šã ã¨ã€webpackã«å¯¾ã—ã¦ã“ã†è¨€ã£ã¦ã„ã‚‹ã®ã¨åŒã˜ã§ã™ã€‚

// "Hey webpack compiler, when you come across a path that resolves to a '.txt' file inside of a require()/import statement, use the raw-loader to transform it before you add it to the bundle."

// webpackã•ã‚“ã€require()æ–‡ã®ä¸­ã§'.txt'ã§çµ‚ã‚ã‚‹ã‚ˆã†ãªãƒ‘ã‚¹ã«å‡ºä¼šã£ãŸã‚‰ã€bundleãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã™ã‚‹å‰ã«raw-loaderã§å¤‰æ›ã—ã¦ãã ã•ã„ã€‚

// Plugins
// LoaderãŒã‚ã‚‹ç¨®ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¤‰æ›ã™ã‚‹ã®ã«å¯¾ã—ã¦ã€Pluginã¯webpackãŒã§ãã‚‹ã“ã¨ã®å¹…ã‚’åºƒã’ã¦ãã‚Œã¾ã™ã€‚PluginãŒã‚ã‚‹ã¨bundleãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€é©åŒ–ã‚„ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãªã©ã„ã‚ã„ã‚ãªã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚Pluginã‚’ä½¿ã†ã«ã¯ã€require()ã‚’ã—ã¦ã€pluginsé…åˆ—ã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚configãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã§åŒã˜Pluginã‚’åˆ¥ã®ç”¨é€”ã«ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã®ã§ã€newæ¼”ç®—å­ã§ãã®éƒ½åº¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

// ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒè€ƒãˆã‚‹æœ€ä½é™ã®webpackæ§‹æˆ
// å¸¸æ™‚mode:productionã¨ã—ã¦buildã•ã‚Œã¾ã™ã€‚
// è¿‘å¹´ã¯grunt/gulp < webpackã®é¢¨æ½®ãŒå¼·ãã€ä¾‹ã«ã‚‚ã‚Œãšè‡ªåˆ†ã‚‚ã—ã‚‡ã£ã¡ã‚…ã†webpackã§ç’°å¢ƒæ§‹ç¯‰ã‚’ã—ã¦ãŠã‚Šã¾ã™ã€‚
// https://homeworks.cloud/post-320/

// webpackã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è§£æ±ºã—ãªãŒã‚‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä¿ã£ãŸã¾ã¾æ›¸ãå‡ºã™
// åƒ•ã¿ãŸã„ãªã¾ã ã¾ã ãƒ¬ã‚¬ã‚·ãƒ¼ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¯ï¼‘ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦SPAãƒ©ã‚¤ã‚¯ã«ã™ã‚‹ã“ã¨ãªã‚“ã¦å‡ºæ¥ãªã„ã‚ã‘ã§ã™ã€‚
// ã¶ã£ã¡ã‚ƒã‘å…±é€šã®App.jsã¨å„ãƒšãƒ¼ã‚¸1ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã‚€ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ååˆ†ãªã‚“ã§ã™ã€‚
// åˆæœŸãƒ­ãƒ¼ãƒ‰ã§æ•°10MBã®jsã‚’èª­ã¿è¾¼ã‚€ã®ã£ã¦æˆ‘æ…¢ã§ããªã„ã‚“ã§ã™ã€‚
// https://qiita.com/fukamiiiiinmin/items/85b3b5cb6e65d9b4ebdd

// å®Ÿè£…ã®ã‚´ãƒ¼ãƒ«
// resourcesé…ä¸‹ã®js,scssãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’ä¿ã£ãŸã¾ã¾publicé…ä¸‹ã®js,cssãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ãŸã„ã€‚
// https://zenn.dev/syamozipc/articles/webpack_note
// è¤‡æ•°entryã‚’å®Ÿè£…ã™ã‚‹ã®ã«ä¾¿åˆ©ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
const glob = require('glob');
// globã®èª­ã¿è¾¼ã¿
// globã¨ã¯ï¼Ÿ
// ã‚°ãƒ­ãƒ–ï¼ˆè‹±: globï¼‰ã¨ã¯ä¸»ã«Unixç³»ç’°å¢ƒã«ãŠã„ã¦ã€ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«åã®ã‚»ãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã“ã¨ã§ã‚ã‚‹ã€‚
// glob ã€åã€‘ ã€”æ¶²ä½“ã®ã€•æ»´ã€å°æ»´â—‡å¯ç®— ã€”å¡—æ–™ãªã©ã®åŠå›ºä½“çŠ¶ã®ã­ã°ã­ã°ã—ãŸã€•å¡Š
// npmã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€ã¤ã§ã€æŒ‡å®šã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŠ½å‡ºã™ã‚‹æ©Ÿèƒ½ã€‚
// https://qiita.com/shizen-shin/items/0224f0617fd5a208a049
// ã‚ã‚ŠãŒã¨ã†ãªâ€¦

const srcDir = './src/js';
const entries = {};

// globã‚’ä½¿ç”¨ã—ã¦ä»»æ„ã®jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ã—ã€è¤‡æ•°entryç”¨ã®objectã‚’ç”Ÿæˆ
// ã“ã‚ŒãŒâ†“å¯¾è±¡ã®jsãªã‚“ã§ã—ã‚‡ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
glob.sync('**/*.js', {
    // compileã‹ã‚‰é™¤å¤–ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šï¼ˆimportã•ã‚Œã‚‹å‰æã®å…±é€šãƒ•ã‚¡ã‚¤ãƒ«ãªã©ï¼‰
    // è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯é…åˆ—ã§è¨˜è¿°

    // 3. globã®ä½¿ç”¨
    // ãƒ»glob("ãƒ‘ã‚¿ãƒ¼ãƒ³"[, options], function(er, files){ å‡¦ç† })
    // optionã¯ä»»æ„
    // ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ç›¸å¯¾ãƒ‘ã‚¹ã§è¨˜è¿°
    // ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨˜è¿°ãŒãªã„å ´åˆã¯"**/*.js"ã¨ã¿ãªã™ã€‚
    // æŒ‡å®šã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŠ½å‡ºã—ã€å‡¦ç†ã‚’å®Ÿè¡Œã—ãŸçµæœã‚’è¿”ã™ã€‚

    // glob.sync
    // globã®syncé–¢æ•°ã‚’ä½¿ã†ã¨ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã™ã€‚
    // glob.sync(pattern, [options])
    // ä¾‹.js
    // glob.sync('resources/*.scss')
    // ä¾‹ãˆã°ã€ä¸Šè¨˜ã§ã‚ã‚Œã°ã€resoucrcesé…ä¸‹ã®scssãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…åˆ—ã¨ã—ã¦æ¬¡ã®å‡¦ç†ã«æ¸¡ã™ã€‚

    ignore: '**/_*/*.js',

    // ãƒ«ãƒ¼ãƒˆã¨ãªã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š
    // ä¸‹è¨˜jsFileNameã«å…¥ã‚‹ã®ã¯ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥é™ã®ãƒ‘ã‚¹ã«ãªã‚‹
    cwd: srcDir,
    // Current Working Directory
    // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«cwdã‚’è¨­å®šã™ã‚‹ã¨ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒ«ãƒ¼ãƒˆã¨ã—ã¦æ¤œç´¢ãŒè¡Œã‚ã‚Œã¾ã™ã€‚
    // ã‚‚ã—ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ãŒã‚ã£ãŸã¨ã—ã¦
    // ./src/script1.js
    // ./src/script2.js
    // ./src/sub/script3.js
    // ./src/sub/script4.js
    // cwdã‚’è¨­å®šã—ãŸçµæœã¯
    // [ "script1.js",
    //   "script2.js",
    //   "sub/script3.js",
    //   "sub/script4.js" ]
    // ã¨ã„ã†é…åˆ—ã§å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

// cwdã®æŒ‡å®šã«ã‚ˆã‚Šã€./resources/js/post/index.jsã®å ´åˆã€ jsFileNameã«ã¯post/index.jsã¨ãŒå…¥ã‚‹
}).forEach(jsFileName => {
    // outputã®[name]ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€entriesã®keyã‹ã‚‰ã¯.jsæ‹¡å¼µå­ã‚’é™¤ã
    const fileNameExceptExt = jsFileName.replace(/\.js$/, '');
    // ã“ã®æ™‚ç‚¹ã§commonã€vendorã«ãªã£ã¦ã‚‹ã‚“ã§ã—ã‚‡ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ

    // path.resolveã«ã‚ˆã‚Šã€çµ¶å¯¾ãƒ‘ã‚¹ãŒå…¥ã‚‹
    // { 'post/index': 'sample_app/resources/js/post/index.js', ... } ã®ã‚ˆã†ã«ãªã‚‹
    entries[fileNameExceptExt] = path.resolve(srcDir, jsFileName);
    // path.resolve()
    // çµå±€â€™path.resolveâ€™ã‚’ã„ã‚Œã‚‹ã¨ä½•ãŒã„ã„ã®ï¼Ÿ
    // å®‰å¿ƒãªã®ã€‚
    // Windowsã¨ã‹ã ã¨ãƒ‘ã‚¹åŒºåˆ‡ã‚ŠãŒ/ã˜ã‚ƒãªã„ã“ã¨ã‚‚ã‚ã‚‹ã¿ãŸã„ã€‚ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã£ã¦ã„ã†ã‚„ã¤ï¼ˆ\ï¼‰ã€‚ã ã‹ã‚‰__dirname + â€˜/srcâ€™ã ã¨ãƒ‘ã‚¹ãŒãŠã‹ã—ããªã£ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã‹ã‚‰path.resolveã‚’ä½¿ã£ã¦å®‰å¿ƒå®‰å…¨ã§è¡Œã“ã†ãœï¼ã£ã¦ã“ã¨ã‚‰ã—ã„ã€‚
    // ã¡ãªã¿ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ã¯path.resolveã˜ã‚ƒã†ã¾ã„ã“ã¨ã„ã‹ãªã„ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã‹ã‚‰ãã®å ´åˆã¯path.joinãªã©ã‚‚ä½¿ã£ã¦ã¿ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
    // è§£æ±ºã™ã‚‹
    // çµ¶å¯¾ãƒ‘ã‚¹ã‚’è¿”ã™ã€‚
    // ä½•è¨€ã£ã¦ã‚‹ã®ã‹ã‚ã‹ã‚‰ã‚“
    // å¼•æ•°ã®å¾Œã‚ã‹ã‚‰é †ã«è©•ä¾¡ã€çµåˆã—ã¦ã„ãã€‚
    // é€”ä¸­ã§çµ¶å¯¾ãƒ‘ã‚¹ãŒå®Œæˆã—ãŸã‚‰çµåˆé€”ä¸­ã§ã‚‚å‡¦ç†ã‚’æŠœã‘ã‚‹ã€‚
    // å¼•æ•°ã®å³ã‹ã‚‰é †ä½å‡¦ç†ã‚’ã—ã¦ã„ãã€â€/â€ã«å½“ãŸã£ãŸæ™‚ç‚¹ã§çµ¶å¯¾ãƒ‘ã‚¹ãŒä½œæˆã•ã‚Œã‚‹ãŸã‚ã€ãã“ã§å‡¦ç†ãŒçµ‚äº†ã™ã‚‹ã€‚ã¤ã¾ã‚Šå¼•æ•°ã®æ–‡å­—åˆ—ã®å…ˆé ­ã«â€/â€ãŒã‚ã‚‹å ´åˆã€ãã“ã¾ã§ã§å‡¦ç†ãŒçµ‚ã‚ã‚‹ã€‚
    // æœ€å¾Œã¾ã§çµ¶å¯¾ãƒ‘ã‚¹ãŒã§ããªã‹ã£ãŸå ´åˆã¯å®Ÿè¡Œæ™‚ã®current_pathã‚’ä»˜ã‘ã¦è¿”ã™ã€‚
    // ãˆã£çµå±€çµ¶å¯¾ãƒ‘ã‚¹ã‚’è¿”ã•ãªã„ã£ã¦ã“ã¨ãªã‚“ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
    // path.resolve(__dirname, 'a', 'b', 'c');
    // => current_path/a/b/c
    // ã“ã®æ™‚ç‚¹ã§common:'./src/js/common.js'ã£ã¦æ„Ÿã˜ã‹ãªã€œ
});

// ç”»åƒã‚’srcã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä¿ã£ãŸã¾ã¾distã«å‡ºåŠ›ã™ã‚‹ãŸã‚ã®è¨˜è¿°
// const imgSrcDir = './src/images';
// const patterns = [];
// let patternsObj = {};
// let directoryName = '';

// glob.sync('images/common', {
  // globã®syncé–¢æ•°ã‚’ä½¿ã†ã¨ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã™ã€‚
  // ãƒ•ã‚©ãƒ«ãƒ€åã¯è¿”ã£ã¦ã“ãªã„ã®ã‹ğŸ˜­ğŸ˜­ğŸ˜­
//     cwd: imgSrcDir,
// }).forEach(imageFileName => {
//   console.log(imageFileName);
    // const fileNameExceptExt = jsFileName.replace(/\.js$/, '');
    // entries[fileNameExceptExt] = path.resolve(srcDir2, jsFileName);
    // if(imageFileName.match('/')){
      // console.log('ã³ã‚ƒã€œ');
      // directoryName = imageFileName.substr(0, imageFileName.indexOf('/'));
      // console.log(cut1);
      // topæŠ½å‡ºã¾ã§ã¯ã„ã‘ãŸãªã
      // ã¦ã‹imagesä»¥ä¸‹ã®å…¨éƒ¨distã«å‡ºåŠ›ã—ã¦ã‚‹ã®ãŒç—›ã„
      // patternsObj.from = `${path.resolve(__dirname, 'src')}/images/${directoryName}`;
      // patternsObj.to = `${path.resolve(__dirname, 'dist')}/images/${directoryName}/[name][ext]`;
      // patterns.push(patternsObj);
      // console.log(patterns);
      // patternsObj = {};
      // è¡Œã‘ãŸãªãâ€¦
      // ã‚ã£ã¡ã‚ƒåŸºæœ¬çš„ãªä½•ã‹ãŒã‚ã‹ã£ã¦ãªãã¦ã‚„ã°ã™ã
    // }
// });
// {
//   from: `${path.resolve(__dirname, 'src')}/images`,
//   // to: `${path.resolve(__dirname, 'dist')}/images/[name]_min[ext]`
//   to: `${path.resolve(__dirname, 'dist')}/images/[name][ext]`
// }
// ã„ã‚„ã“ã‚Œå‡¦ç†é‡ã™ãã§ã—ã‚‡jpgä¸€ã¤ãšã¤ã¨ã‹
// imagesã®ä¸­ã«ãƒ•ã‚©ãƒ«ãƒ€ãŒã‚ã£ãŸã‚‰ãã‚Œã‚’å–å¾—ã€ã¿ãŸã„ãªæ„Ÿã˜ã§ã§ã‚„ã‚“ãªã„ã¨ã‚ã‹ã‚“ã‚
// ä¸€æ—¦è§£æ•£ã§ğŸ™‚

// ç”»åƒã‚’srcã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä¿ã£ãŸã¾ã¾distã«å‡ºåŠ›ã™ã‚‹ãŸã‚ã®è¨˜è¿°ï¼’
// const patterns = [];
// const createCopyPluginPatterns = () => {
//   let patternsObj = {};
//   const imagesDirectoryList = ['common','top'];
//   // https://toyono-exp.co.jp/
//   // ã‚¨ãƒ ãƒãƒ³ãƒ‰ãŒã€Œimg/commonã€ã ã—åˆ¥ã«ã€Œimg/commonã€ã§è¡Œã‘ã°ã„ã£ã‹â€¦
//   imagesDirectoryList.forEach(directoryName => {
//       patternsObj.from = `${path.resolve(__dirname, 'src')}/images/${directoryName}`;
//       patternsObj.to = `${path.resolve(__dirname, 'dist')}/images/${directoryName}/[name][ext]`;
//       // ReferenceError: from is not defined
//       // ãˆã£[]ã£ã¦æ—¢å­˜ã˜ã‚ƒãªã„ã¨ã ã‚ãªã‚“ã ï¼ï¼ï¼ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
//       patterns.push(patternsObj);
//       // console.log(patterns);
//       patternsObj = {};
//   });
//   // ä¸€æ—¦ã“ã‚Œã§æ‰‹æ‰“ã¡ã‹â€¦
//   // ã¦ã‹imageMin?ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ãã‚‹ã‚ˆã†ã«ã—ãªã„ã‚“ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
// }
// createCopyPluginPatterns();
// https://zenn.dev/rik9228/articles/256d26cbfcaf1e
// imagemin-keep-folderã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆé…ä¸‹ï¼ˆ./srcï¼‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ç¶­æŒã—ãŸçŠ¶æ…‹ã§ã€åãå‡ºã—å…ˆã«æœ€é©åŒ–ã—ãŸç”»åƒç¾¤ã‚’é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
// ã‚­ãƒ§ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ï¼ï¼ï¼ï¼ï¼ï¼ï¼

/* EJSèª­ã¿è¾¼ã¿ã®å®šç¾© */
// const ejsentries = WebpackWatchedGlobEntries.getEntries([path.resolve(__dirname, `${filePath.ejs}**/*.ejs`)], {
//   ignore: path.resolve(__dirname, `${filePath.ejs}**/_*.ejs`),
// })();
// const htmlGlobPlugins = (entries) => {
//   return Object.keys(entries).map(
//     (key) =>
//       new HtmlWebpackPlugin({
//         //å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«å
//         filename: `${key}.html`,
//         //ejsãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
//         template: htmlWebpackPluginTemplateCustomizer({
//           htmlLoaderOption: {
//             //ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•èª­ã¿è¾¼ã¿ã¨åœ§ç¸®ã‚’ç„¡åŠ¹åŒ–
//             sources: false,
//             minimize: false,
//           },
//           templatePath: `${filePath.ejs}${key}.ejs`,
//         }),

//         //JSãƒ»CSSè‡ªå‹•å‡ºåŠ›ã¨åœ§ç¸®ã‚’ç„¡åŠ¹åŒ–
//         inject: false,
//         minify: false,
//       })
//   );
// };

module.exports = {
    // module.exportsã¨ã¯
    // JavaScript(Node.js)ã«ãŠã„ã¦ã€
    // ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«å­˜åœ¨ã™ã‚‹å¤‰æ•°ã‚„é–¢æ•°ã‚’ã€åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚
    // ã‚ã‹ã£ãŸã“ã‚Œapp.jsã«ã™ã¹ã¦ã‚’é›†ã‚ã¦app.jsã§ã™ã¹ã¦å®Ÿè¡Œã—ã¦ã‚‹ã‚“ã‚„ã‚ï¼Ÿï¼Ÿï¼Ÿ
    // app.jsã§ã¨ãã«é›†ç´„ã—ã¦ãªã‹ã£ãŸã½ã‚ˆğŸ˜­
    // module.exports ã®ä½¿ã„æ–¹
    // ã“ã® exports ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ã‚ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å‚ç…§ã•ã›ãŸã„ã¨ãã«æ´»èºã—ã¾ã™ã€‚
    // ã“ã‚Œã¯ module ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® exports ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ç©ºã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã€ func1 ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½œæˆã—ã¦ã€ãã‚Œã«ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ï¼‘ã¤è¨­å®šã—ã€ ã•ã‚‰ã«ã€person ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚»ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚
    mode: 'production',
    // mode: 'development',
    // developmentã«ã—ãŸã‚‰è¦‹è¦šãˆã®ã‚ã‚‹è¨˜è¿°ã«ãªã£ãŸãªãâ€¦
    // entry: './src/js/vendor.js',
    // entry: {
    //   common: './src/js/common.js',
    //   vendor: './src/js/vendor.js'
    // },
    // ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¯ãƒãƒ³ãƒ‰ãƒ«ã®æ§‹ç¯‰ã‚’é–‹å§‹ã™ã‚‹å ´æ‰€ã‚’æŒ‡ã—ã¾ã™ã€‚
    // Webpackã¯æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŸºæº–ã«ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã„ãã¾ã™ã€‚
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãã®å€¤ã¯./src/index.jsã§ã™ã€‚
    // https://next-blog.site/media/webpack/
    // webpackã§è¤‡æ•°ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹
    // ã€Œvendorã€ã¨ã‹ã¯ä»»æ„ãªã®ï¼Ÿï¼Ÿï¼Ÿ
    entry: entries,
    // ãã†ã‹ã“ã‚Œã§è‡ªå‹•ã§srcã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’entryã«æŒ‡å®šã§ããŸã£ã¦ã“ã¨ã‚„ãª
    // ã¾ã‚ä¸€æ—¦ãƒŸãƒ„ã‚¨ãƒ¼ï¼ˆãºã‚“ã¦ã‚‹ï¼‰ã¿ãŸã„ã«ãªã£ãŸã—ã„ã„ã‹ jsã¯
    // top/?.jsã¨ã—ã¦ã‚‚ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯è¤‡è£½ã•ã‚Œã‚‹ã‚ˆã†ã«ã¯ãªã£ã¦ã‚‹ã½ã‚ˆ
    // cssã®æ–¹ãŒã‚ã‹ã‚‰ã‚“
    // ç¢ºèªã—ãŸã‘ã©ãã‚‚ãã‚‚ã§ãã‚‹ã®ã‹ã£ã¦ã„ã†ç–‘å•ãŒæ¹§ã„ã¦ãã¦ã‚‹
    // ã¨ã¯ã„ãˆãƒŸãƒ„ã‚¨ãƒ¼ã¨åŒã˜ã«ãªã£ãŸã—ã¾ã‚ã„ã„ã‹
    // ã¦ã‹ç”»åƒå¿˜ã‚Œã¦ãŸã‚
    watch: true,
    // srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç›£è¦–
    // ã“ã‚ŒãŒdistã‚’ç›£è¦–ã—ãªã„ä»•çµ„ã¿ï¼Ÿã¯ã‚ˆãã‚ã‹ã£ã¦ãªã„
    // watchã¨devã‚µãƒ¼ãƒãƒ¼ã®é•ã„ãŒã‚ã‹ã‚‰ãªã„ã‚“ã ã‘ã©
    target: ['web', 'es5'],
    // ES5 ã¸ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«
    // ã¾ã‚ES5ã¾ã§è½ã¨ã›ã°ã„ã„ã§ã—ã‚‡å…¨ç„¶
    watchOptions: {
      ignored: /node_modules/,
      //   ãªãŠã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã™ã‚‹åº¦ã«ãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãããªã‚‹ã¨æ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã†ã®ã§ã¯ã¨å¿ƒé…ã«ãªã‚Šã¾ã™ãŒã€watchãƒ¢ãƒ¼ãƒ‰ã§ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæœ‰åŠ¹ã«ãªã‚Šã€å·®åˆ†ãŒãƒ“ãƒ«ãƒ‰ã•ã‚Œã¾ã™ã®ã§ã€ãƒ“ãƒ«ãƒ‰ã«ã‹ã‹ã‚‹æ™‚é–“ã¯çŸ­ããªã‚Šã¾ã™ã€‚ãŸã ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤šãç›£è¦–ã—ã¦ã„ã‚‹ã¨ã€ã©ã†ã—ã¦ã‚‚CPUã‚„ãƒ¡ãƒ¢ãƒªã®ä½¿ç”¨é‡ãŒå¤§ãããªã‚‹æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã€watchOptionsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ignoredãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€æŒ‡å®šã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›£è¦–å¯¾è±¡ã‹ã‚‰å¤–ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ignoredãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€æ–‡å­—åˆ—ã¾ãŸã¯æ­£è¦è¡¨ç¾ã§æŒ‡å®šã§ãã¾ã™ã€‚
      // aggregateTimeout: 200,
      // poll: 100 //æ¯ç§’å¤‰æ›´ã‚’ç¢ºèªã—ã¾ã™
      // ã“ã®äºŒã¤ãªãã¦ã‚‚æ—©ã„ãªã
      // ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦ã¯ã€å¤šãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›£è¦–ã™ã‚‹ã“ã¨ã§ã€CPUã‚„ãƒ¡ãƒ¢ãƒªã®ä½¿ç”¨é‡ãŒå¤šããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ node_modulesã®ã‚ˆã†ãªå·¨å¤§ãªãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’æ­£è¦è¡¨ç¾ã§é™¤å¤–ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™:
    },
     cache: true,
     // cacheã£ã¦ãªã‚“ã‚„ã­ã‚“ã£ã¦æ€ã£ãŸã‘ã©å·®åˆ†ä»¥å¤–ã®å¤‰æ›´ã¯è¿½ã‚ãªã„ï¼Ÿã£ã¦ã£ã¦æ„Ÿã˜ã§ã—ã‚‡
     //ã€€ã“ã‚Œã£ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹ã«ãªã£ã¦ãªã„ã®ï¼Ÿï¼Ÿ
    // output: {
      // path: path.resolve(__dirname, 'dist'),
      // ãƒ“ãƒ«ãƒ‰å¾Œã®å‡ºåŠ›å…ˆã¨ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã™ã‚‹é …ç›®ã§ã€åˆæœŸå€¤ã¯â€./dist/main.jsâ€ã§ã™ã€‚
      // path.resolve() ã¯nodeã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã¦ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰è¦‹ãŸãƒ‘ã‚¹ã‚’è¿”ã™
      // è¦ã¯require(â€˜pathâ€™)ã‚’æ›¸ãã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã«ä»‹å…¥ï¼ˆæ“ä½œï¼‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‚‰ã—ã„ã€‚ä¾‹ãˆã°ã€path.resolveã¨ã„ã†é–¢æ•°ã ã¨ã€çµ¶å¯¾ãƒ‘ã‚¹ã«å¤‰æ›ã—ã¦ãã‚Œã‚‹ã¿ãŸã„ã€‚
      // __dirname ã¯ã€ç¾åœ¨å®Ÿè¡Œä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®çµ¶å¯¾ãƒ‘ã‚¹ã‚’ç¤ºã™ç’°å¢ƒå¤‰æ•°ã§ã™ã€‚
      // ä½•è¨€ã£ã¦ã‚“ã®ã“ã„ã¤
      // path.resolve() ãŒè¿”ã™ãƒ‘ã‚¹ã¯ã€å¸¸ã« node ã‚³ãƒãƒ³ãƒ‰ã§ç›´æ¥å®Ÿè¡Œã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰è¦‹ãŸãƒ‘ã‚¹ã‚‰ã—ã„ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è¦‹ãŸãƒ‘ã‚¹ã§ã¯ãªã„ã€‚
      // ä½•è¨€ã£ã¦ã‚“ã®ã“ã„ã¤
      // ã‚‚ã— mod.js ã‹ã‚‰è¦‹ãŸ ../ ã®çµ¶å¯¾ãƒ‘ã‚¹ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã¯ã€â†“ã®ã‚ˆã†ã« __dirname ã¨çµ„ã¿åˆã‚ã›ã¦æ›¸ãå¿…è¦ãŒã‚ã‚‹ã€‚
      // ã€Œçµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€ã¨ã„ã†ç‚¹ã§ã¯ã€ä¸¡æ–¹ã¨ã‚‚åŒã˜ã ã€‚
      // ã§ã¯ãªãœã€path.resolveã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ï¼Ÿ
      // çµè«–ã‹ã‚‰ã„ã†ã¨ã€OSã®é•ã„ã«ã‚ˆã£ã¦æ€ã‚ã¬æŒ™å‹•ãŒèµ·ã“ã‚‰ãªã„ã‚ˆã†ã«ã€å®‰å…¨ã®ãŸã‚ã“ã†ã„ã£ãŸæ›¸ãæ–¹ã‚’ã—ã¦ã„ã‚‹ã‚ˆã†ã ã€‚
      // webpack ã®è¨­å®šã«ãŠã„ã¦ã€output ã® path ã«ã¯çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã†ã€‚
      //   output: {
      //     // çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹
      //     path: path.resolve(__dirname, 'public/js')
      //   }
      // Macã§ã‚ã‚Œã°ã€${__dirname}/distã¨ã„ã£ãŸæ›¸ãæ–¹ã§ã‚‚å•é¡Œã¯ãªã„ã€‚
      //   output: {
      //     path: `${__dirname}/dist`,
      //     filename: 'main.js'
      //   },
      // ã—ã‹ã—ã€OSã«ã‚ˆã£ã¦ã¯ãƒ‘ã‚¹ã®æ›¸ãæ–¹ãŒ/ã˜ã‚ƒãªã„ã“ã¨ãŒã‚ã‚Šã€${__dirname}/distã ã¨å¤‰ã«ãªã£ã¦ã—ã¾ã£ã¦å‹•ã‹ãªã„å¯èƒ½æ€§ãŒå‡ºã¦ãã‚‹ã€‚
      // ã ã‹ã‚‰ã€çµ¶å¯¾ãƒ‘ã‚¹ã‚’ç¢ºå®Ÿã«è¨­å®šã™ã‚‹ãŸã‚ã€path.resolve()ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã€‚
      // ä½•ã£ã¦ã‚‹ã®ã‹ã‚ã‹ã‚‰ã‚“
    //   filename: 'js/bundle.js',
    // },
    output: {
      // æœ€ä¸Šä½ã®outputã‚­ãƒ¼ã«ã¯ã€ãƒãƒ³ãƒ‰ãƒ«ã€ã‚¢ã‚»ãƒƒãƒˆã€ãŠã‚ˆã³ Webpack ã§ãƒãƒ³ãƒ‰ãƒ«ã¾ãŸã¯ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãã®ä»–ã®ã‚‚ã®ã‚’å‡ºåŠ›ã™ã‚‹æ–¹æ³•ã¨å ´æ‰€ã«ã¤ã„ã¦ Webpack ã«æŒ‡ç¤ºã™ã‚‹ä¸€é€£ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
      filename: 'js/[name].min.js',
      // ãªã‚‹ã»ã©[name]ã«ã‚­ãƒ¼ãŒå…¥ã‚‹ã¨
      // ã“ã‚Œãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®æŒ‡å®šã£ã½ã„
      // å˜ä¸€entryãƒã‚¤ãƒ³ãƒˆã®å ´åˆã€ã“ã‚Œã¯é™çš„ãªåå‰ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
      // ãŸã ã—ã€è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒª ãƒã‚¤ãƒ³ãƒˆã€ã‚³ãƒ¼ãƒ‰åˆ†å‰²ã€ã¾ãŸã¯ã•ã¾ã–ã¾ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä»‹ã—ã¦è¤‡æ•°ã®ãƒãƒ³ãƒ‰ãƒ«ã‚’ä½œæˆã™ã‚‹å ´åˆã¯ã€æ¬¡ã®ã„ãšã‚Œã‹ã®ç½®æ›ã‚’ä½¿ç”¨ã—ã¦å„ãƒãƒ³ãƒ‰ãƒ«ã«ä¸€æ„ã®åå‰ã‚’ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
      path: path.join(__dirname, 'dist'),
      // ãƒ‘ã‚¹çµåˆã‚’è¡Œã„ãŸã„ã¨ãã¯path.joinãŒä¾¿åˆ©ã§ã™ã€‚
      // / ã®å­˜åœ¨ã‚’ã‚ˆã—ãªã«è§£é‡ˆã—ã¦çµåˆã—ã¦ãã‚Œã¾ã™ã€‚
      // const path = require('path');
      // console.log(path.join('/a/b', 'c', 'd', 'e.txt')); // => /a/b/c/d/e.txt
      // â—† join ã¨ã‚Šã‚ãˆãšãã£ã¤ã‘ã‚‹
      // â—† é€”ä¸­ã®çµ¶å¯¾ãƒ‘ã‚¹ã¯ç„¡æ„å‘³
      // â—† resolve é€šå¸¸ã¯å¸¸ã«çµ¶å¯¾ãƒ‘ã‚¹ã‚’è¿”ã™
      // â—† å¾Œã‚ã‹ã‚‰é †ã«è¦‹ã¦çµ¶å¯¾ãƒ‘ã‚¹ãŒã‚ã‚Œã°ãã‚Œã‚ˆã‚Šå‰ã®å¼•æ•°ã¯ç„¡è¦–ã•ã‚Œã‚‹
      // â—† çµ¶å¯¾ãƒ‘ã‚¹ãŒãªã„ãªã‚‰ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã¨ã—ã¦å‡¦ç†ã•ã‚Œã‚‹
    },
    // devServer: {
      // ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã¨åŒæ™‚ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒç«‹ã¡ä¸ŠãŒã‚Šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ«ãƒ¼ãƒˆã«è¨­å®šã—ãŸãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚
      // ã¾ãŸã€webpack-dev-serverã¯ã€ãƒãƒ³ãƒ‰ãƒ«å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã®å‹•çš„ãªæ›´æ–°ã«è¿½å¾“ã—ã¦webpackã«ã‚ˆã‚‹ãƒãƒ³ãƒ‰ãƒ«ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚
      // open: true,
      // ãƒ–ãƒ©ã‚¦ã‚¶ãŒåŒæ™‚ã«é–‹ã
      // port: 9000,
      // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
      // contentBase: path.resolve(__dirname, 'dist'),
      // ä¿®æ­£å†…å®¹
      // å…¬å¼ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆmigration-v4ã‚’å‚è€ƒã«ä¿®æ­£ã—ã¦ã„ãã¾ã™ã€‚
      // ä¸Šè¨˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ã¨v3ã®contentBaseã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯
      // v4ã§ã¯static{}é…ä¸‹ã®directoryã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«å¤‰æ›´ã•ã‚ŒãŸã®ã§
      // ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãã“ã¨ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ™ãƒ¼ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
      // çŸ¥ã‚‹ã‹ãƒœã‚±
      // static: {
      //   directory: path.resolve(__dirname, "dist"),
      // },
      // devServer: {
      //   contentBase: outputPath
      // }
      // ã“ã†ã„ã†ã®ã‚‚ã‚ã‚‹ã£ã½ã„
    // },
    // !!!æœ¬ç•ªæ™‚ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ!!!
    // devtool: "source-map",
    // mapãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡ºåŠ›
    module: {
        rules: [
          // ãƒ­ãƒ¼ãƒ€ãƒ¼
          // ãƒ­ãƒ¼ãƒ€ ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚„ãƒ‡ãƒ¼ã‚¿ãªã©ã‚’ã€å¤–éƒ¨ã‹ã‚‰ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ãªã©ã‚’é€šã—ã¦å—ã‘å–ã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ é–“ã®å‚ç…§é–¢ä¿‚ã‚’è§£æ±ºã—ä½ç½®ä¾å­˜ã«å¯¾ã™ã‚‹ãƒªãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã£ãŸä¸Šã§ã€ä¸»è¨˜æ†¶è£…ç½®ã‚„ãƒ¯ãƒ¼ã‚¯ã‚¨ãƒªã‚¢ã«ç½®ãã€å®Ÿè¡Œé–‹å§‹ã•ã›ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚ã‚‹
          // æ—¥æœ¬èªå–‹ã‚Œ
          {
            //æ‹¡å¼µå­ .scssã‚’å¯¾è±¡
            test: /\.scss$/,
            // ä½¿ç”¨ã™ã‚‹ãƒ­ãƒ¼ãƒ€ãƒ¼ã®æŒ‡å®šï¼ˆå¾Œã‚ã‹ã‚‰é †ç•ªã«é©ç”¨ã•ã‚Œã‚‹ï¼‰
            // é©ç”¨ã¨ã„ã†ã‹å‡¦ç†ã•ã‚Œã‚‹ã¿ãŸã„ãªï¼ˆãƒŠã‚¤ã‚¹ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
            // use: ['style-loader', 'css-loader', 'sass-loader' ],
            // style-loaderï¼šheaderã®styleã‚¿ã‚°ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œï¼Ÿã®è¨˜è¿°ã‚’çµ„ã¿è¾¼ã‚€â†’ã“ã‚Œã ã¨å•é¡ŒãŒç™ºç”Ÿã™ã‚‹
            // style-loader ã¨ã¯
            // style-loader ã¯,
            // Inject CSS into the DOM.
            // ã¨ã‚ã‚Šã€JS ã®ä¸­ã«ã‚ã‚‹ CSS æ–‡å­—åˆ—ã‚’ DOM ã«æŒ¿å…¥ã™ã‚‹å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚ ãã®ãŸã‚ã€CSS ã‚’ãƒšãƒ¼ã‚¸ã«åæ˜ ã•ã›ã‚‹ãŸã‚ã«å¿…è¦ã«ãªã£ã¦ãã‚‹ loader ã§ã™ã€‚
            // jsã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãããªã‚‹ã€cssãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œãªã„
            // ãã“ã§ä½¿ã†ã®ãŒã€Œmini-css-extract-pluginã€
            // npm uninstall style-loaderã§ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
            use: [
              MiniCssExtractPlugin.loader,
              'css-loader',
              'postcss-loader',
              // 'sass-loader'
              {
                // sassã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦cssã«å¤‰æ›ã™ã‚‹
                loader: 'sass-loader',
                options: {
                    // Dart Sassã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
                    implementation: require('sass'),
                },
              },
              // https://blog.isystk.com/system_develop/frontend/webpack/1885/
            ]
            // è¨˜è¿°ãŒåœ§ç¸®ã•ã‚Œã‚‹ã®ã¯productionãƒ¢ãƒ¼ãƒ‰ã ã¨sass-loaderã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè‡ªå‹•ã§æœ‰åŠ¹ï¼Ÿã«ãªã‚‹ã‹ã‚‰ã‚‰ã—ã„
            // postcss-loaderã§ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ã¤ã‘ã‚‹
            // PostCSSã¨ã¯ä½•ã‹
            // PostCSSã¨ã¯ã€ãƒ­ã‚·ã‚¢äººã® Andrey Sitnik ã¨ã„ã†äººãŒé–‹ç™ºã—ã¦ã„ã‚‹ã€Node.jsè£½ã®ã€ŒCSSãƒ„ãƒ¼ãƒ«ã‚’ä½œã‚‹ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ã§ã™ã€‚PostCSSè£½ã®ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã€ãƒ™ãƒ³ãƒ€ãƒ¼ãƒ—ãƒªãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è‡ªå‹•ã§ä»˜ä¸ã™ã‚‹ã€ŒAutoprefixerã€ã€æœªæ¥ã®CSSã®æ§‹æ–‡ã®ä¸€éƒ¨ã‚’ä»Šã®ãƒ–ãƒ©ã‚¦ã‚¶ã§è§£é‡ˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€Œcssnextã€ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ã«å¯Œã‚“ã§ã„ã‚‹CSSãƒªãƒ³ã‚¿ãƒ¼ã§ã‚ã‚‹ã€Œstylelintã€ãªã©ãŒæœ‰åã§ã™ã€‚
            // css-loaderã¯,
            // The css-loader interprets @import and url() like import/require() and will resolve them.
            // ã¨ã‚ã‚Šã€JS ã®ä¸–ç•Œã«ã‚ã‚‹ CSS ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æ±ºã§ãã‚‹ loader ã§ã™ã€‚ JS ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§èª­ã¿è¾¼ã¾ã‚Œã‚‹ CSS ã‚’æ–‡å­—åˆ—ã¨ã—ã¦ JS ã®ä¸–ç•Œã«æŒã¡è¾¼ã‚ã¾ã™ã€‚
          },
          {
            test: /\.js$/,
            use: {
             loader: 'babel-loader',
             options: {
              presets: [ '@babel/preset-env' ]
             }
            }
          },
          {
            test: /\.ejs$/,
            use: [
              /**
               * HtmlLoader -> TemplateEjsLoader
               */
              {
                loader: 'html-loader',
                // https://qiita.com/Sharkkii/items/9598c75707d2ffa600e1
                // html-loader ã¯ template-ejs-loader ç­‰ã®å‡ºåŠ›çµæœã‚’Webpackã®ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã§å–ã‚Šæ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚‚ã®ã§ã™ï¼ˆã“ã®è¨˜äº‹ã§ã¯è©³ç´°ã‚’å‰²æ„›ã—ã¾ã™ï¼‰
                options: {
                  minimize: false
                },
              },
              // 'html-loader',
              'ejs-plain-loader'
              // https://zenn.dev/manappe/articles/b4e95135763213
              // {
              //   loader: 'ejs-plain-loader'
              // }
              // "template-ejs-loader",
            ],
          },
          // {
          //   test: /\.(jpe?g|gif|png|svg)$/,
          //   use: [
          //     {
          //       loader: 'file-loader',
          //       options: {
          //         name: '[name].[contenthash].[ext]',
          //         name: 'aaa.jpg',
          //         outputPath: 'images',
          //         publicPath: '/images',
          //       },
          //     },
          //     'image-webpack-loader',
          //   ],
          // },
        ],
    },
    plugins: [
        new MiniCssExtractPlugin({
          // https://zenn.dev/syamozipc/articles/webpack_note
          // [name]ã«ã¯entryã§æŒ‡å®šã—ãŸkeyãŒå…¥ã‚‹
          // post/index.jsã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹scssã¯public/css/post/index.cssã«å‡ºåŠ›ã•ã‚Œã‚‹
          // CSSã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã«ã¯ã€mini-css-extract-pluginã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
          // https://corecolors.net/webpack-css/
          // æŠ½å‡ºã™ã‚‹ CSS ã®ãƒ•ã‚¡ã‚¤ãƒ«å
          // filename: 'css/bundle.css',
          filename: 'css/[name].min.css',
          // publicã®cssã«ã“ã®cssãŒå‡ºåŠ›ã•ã‚Œã‚‹
          // [name]ã«ã¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆåãŒå…¥ã‚‹ appãŒã‚¢ãƒƒãƒ—ãŒå…¥ã‚‹ï¼ˆentryï¼‰
          // [contenthash]ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾ç­–è¿½åŠ 
          // ãŸã htmlã¨ã®é€£æºã¯htmlãªã‚“ã¡ã‚ƒã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªã„ã¨ã ã‚ã£ã½ã„
        }),
        // new CleanWebpackPlugin({
        //   cleanOnceBeforeBuildPatterns: ['**/*', '!**.html'],
        //   // htmlãƒ•ã‚¡ã‚¤ãƒ«ä»¥å¤–ã‚’ã‚’å…¨ã¦å‰Šé™¤
        // })
        new HtmlWebpackPlugin({
          template: path.resolve(__dirname, "src", "src.ejs"),
          filename: "target.html",
          minify: false, // è¿½åŠ 
          // minify: {
          //   minify: false
          //   // collapseWhitespace: true,
          //   // preserveLineBreaks: true,
          // },
        }),
        // ãªã‚“ã‹ã‚ã£ã¡ã‚ƒjsã¨cssãŒå‡ºåŠ›ã•ã‚Œã¦ã‚‹ã‘ã©â€¦ğŸ˜­
        // https://webpack.js.org/plugins/html-webpack-plugin/
        // è¤‡æ•°ã® Webpack ã‚¨ãƒ³ãƒˆãƒª ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã€<script>ç”Ÿæˆã•ã‚Œã‚‹ HTML ã«ã¯ãã‚Œã‚‰ãŒã™ã¹ã¦ã‚¿ã‚°ã¨ã¨ã‚‚ã«å«ã¾ã‚Œã¾ã™ã€‚
        // https://corecolors.net/webpack-html-webpack-plugin/
        // webpack-config.jsã«å¾“ã„ã€HTMLãŒç”Ÿæˆã•ã‚Œã‚‹ã¾ã™ã€‚
        // ï¼ˆHTMLã«ã€ç”»åƒã‚„CSSãƒ»JSãŒè‡ªå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¦å‡ºåŠ›ã•ã‚Œã‚‹ï¼‰
        // ã˜ã‚ƒã‚ã“ã‚Œã˜ã‚ƒã ã‚ãªã‚“ã˜ã‚ƒã­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        // ã˜ã‚ƒã‚ã“ã‚Œã˜ã‚ƒã ã‚ãªã‚“ã˜ã‚ƒã­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        // ã˜ã‚ƒã‚ã“ã‚Œã˜ã‚ƒã ã‚ãªã‚“ã˜ã‚ƒã­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        // ã˜ã‚ƒã‚ã“ã‚Œã˜ã‚ƒã ã‚ãªã‚“ã˜ã‚ƒã­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        // ã˜ã‚ƒã‚ã“ã‚Œã˜ã‚ƒã ã‚ãªã‚“ã˜ã‚ƒã­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        // HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€dist/é…ä¸‹ã«ç”Ÿæˆã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
        // åœ§ç¸®ã•ã‚Œã¡ã‚ƒã†ã®ãŒè§£ã‘ãªã„ãªãâ€¦
        // åœ§ç¸®ã•ã‚Œã¡ã‚ƒã†ã®ãŒè§£ã‘ãªã„ãªãâ€¦
        // åœ§ç¸®ã•ã‚Œã¡ã‚ƒã†ã®ãŒè§£ã‘ãªã„ãªãâ€¦
        // new ImageminPlugin({
        //   // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¸®å°ã—ã¦ãã¾ã™ã€‚
        //   // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã™ã‚‹å‰ã«TinyPNGãªã©ã‚’ä½¿ã£ã¦ç”»åƒç¸®å°ã™ã‚‹æ‰‹é–“ãŒçœã‘ã¾ã™ã€‚
        //   // https://zenn.dev/yuri/books/4391b9280f823061932c/viewer/e998d5654d541e002f42
        //   disable: process.env.NODE_ENV !== 'production',
        //   // Disable during development
        //   // é–‹ç™ºæ™‚ã®ã¿æœ€é©åŒ–ã—ãªã„ã£ã¦ã„ã†ã®ã‚ã£ãŸã‚“ã‚„ãª
        //   // ã“ã‚Œã£ã¦distã«å‡ºåŠ›ã™ã‚‹æ©Ÿèƒ½å†…è”µã—ã¦ãªã„ã®ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        //   // https://www.npmjs.com/package/imagemin-webpack-plugin
        //   // ã“ã‚Œã¯ã€Imageminã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã™ã¹ã¦ã®ç”»åƒã‚’åœ§ç¸®ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
        //   // ã“ã‚Œã£ã¦CopyPluginã®å‰ã«ä½ç½®ã—ã¦ã„ã‚‹ã‘ã©å¤§ä¸ˆå¤«ãªã‚“ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
        //   // https://homeworks.cloud/post-320/
        //   // ã ã‚ã£ã½ã„ãª
        //   test: /\.(jpe?g|png|gif|svg)$/i,
        //   pngquant: {
        //     quality: '65-80'
        //   },
        //   // ã“ã‚Œã£ã¦ImageminPngquantãªã—ã§ã‚‚å‹•ã„ã¦ã‚“ã®ï¼Ÿï¼Ÿï¼Ÿ
        //   // https://homeworks.cloud/post-320/
        //   gifsicle: {
        //     interlaced: false,
        //     optimizationLevel: 1,
        //     colors: 256
        //   },
        //   svgo: {
        //   },
        //   plugins: [
        //     ImageminMozjpeg({
        //       quality: 80,
        //       progressive: true
        //     })
        //   ]
        // }),
        // new CopyPlugin({
          // æ—¢å­˜ã®å€‹ã€…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨ä½“ã‚’ãƒ“ãƒ«ãƒ‰ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
          // patterns: [
          //   {
          //     from: `${path.resolve(__dirname, 'src')}/images/common`,
          //     // to: `${path.resolve(__dirname, 'dist')}/images/[name]_min[ext]`
          //     to: `${path.resolve(__dirname, 'dist')}/images/common/[name][ext]`
          //   }
            // {
            //   from: `${path.resolve(__dirname, 'src')}/images/top`,
            //   // to: `${path.resolve(__dirname, 'dist')}/images/[name]_min[ext]`
            //   to: `${path.resolve(__dirname, 'dist')}/images/top/[name][ext]`
            // }
          //   // æ–‡å­—åˆ—ã«å¤‰æ•°æŒ¿å…¥ã—ã¦ã‚‹ã‹ã‚‰ã­ã‡
          //   // ${} ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã¨ã¯
          //   // ãˆã‚Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã£ã¦ã“ã‚“ãªæ„Ÿã˜ã ã£ãŸã‚“ã ã£ã‘ï¼ï¼ï¼Ÿï¼Ÿ
          //   // ãˆã‚Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã£ã¦ã“ã‚“ãªæ„Ÿã˜ã ã£ãŸã‚“ã ã£ã‘ï¼ï¼ï¼Ÿï¼Ÿ
          //   // ãˆã‚Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã£ã¦ã“ã‚“ãªæ„Ÿã˜ã ã£ãŸã‚“ã ã£ã‘ï¼ï¼ï¼Ÿï¼Ÿ
          //   // fromã€toã‚’æ–‡å­—åˆ—ã§æŒ‡å®šï¼Ÿã™ã‚‹ã‚“ã‚„ã­
          //   // {
          //   //   from: `${path.resolve(__dirname, 'src')}/images/**`,
          //   //   // to: `${path.resolve(__dirname, 'dist')}/images/[name]_min[ext]`
          //   //   to: `${path.resolve(__dirname, 'dist')}/images/[name][ext]`
          //   // }
          //   // https://webpack.js.org/configuration/output/
          //   // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—
          //   // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
          //   // []ã“ã‚ŒãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ã£ã¦ã“ã¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
          //   // []ã“ã‚ŒãŒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ã£ã¦ã“ã¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
          //   // æ¬¡ã®ç½®æ›ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ–‡å­—åˆ—ã§ä½¿ç”¨ã§ãã¾ã™
          //   // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¬ãƒ™ãƒ«ã§åˆ©ç”¨å¯èƒ½ãªç½®æ›:
          //   // [name]
          //   // æ‹¡å¼µå­ã‚„ãƒ‘ã‚¹ã®ãªã„ãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿
          //   // [ext]
          //   // ã‚¿ã‚¤ãƒ—:String ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ:file.extname
          //   // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«/ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã€‚
          //   // ã“ã‚Œãªã‚“ã‹ãƒ«ãƒ¼ãƒ—ã™ã‚Œã°ã„ã‘ãã†ã ã‘ã©
          //   // entry: entries,ã“ã‚Œã‚‚çµå±€ãƒ«ãƒ¼ãƒ—ã ã‹ã‚‰ãªã
          //   // ã“ã‚Œentry: entries,ã®æ–¹ã¨åŒã˜æ„Ÿã˜ã§å¯¾å‡¦ã™ã‚Œã°ã„ã‘ã‚‹ã§ã—ã‚‡
          //   // ãŸã ã„ã£ãŸã‚“ãƒ™ã‚¿æ›¸ãã§ã‚„ã£ã¦ãã‚Œã„
          //   // patternsã§é…åˆ—ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå…¥ã‚Œã‚‹æ„Ÿã˜ã§
          //   // ã¨ã‚Šã‚ãˆãšãƒŸãƒ„ã‚¨ãƒ¼æ–¹å¼ã«ã§ãã‚‹è¦‹é€šã—ã¯ãŸã£ãŸ
          // ]
        //   patterns: patterns,
        // }),
        new BrowserSyncPlugin({
          host: 'localhost',
          // port: 2000,
          // portæŒ‡å®šã—ãªãã¦ã‚‚å‹•ããªãâ€¦
          // ãªã‚“ã‹ã€Œhttp://localhost:3000/ã€ã¨ã‹ã€Œhttp://localhost:3002/ã€ã«ãªã‚‹ãªãâ€¦
          server: { baseDir: 'dist' },
          // distã‚’ç›£è¦–
          watch: true
          // â†‘å‹•ä½œã—ãªã„ã®ã§
          // package.jsonå´ã§æŒ‡å®š
          // ä½•è¨€ã£ã¦ã‚“ã®ã“ã„ã¤
          // ã“ã‚Œãªã„ã¨ç›£è¦–ã•ã‚Œãªã‹ã£ãŸã½ã‚ˆ
        })
    ],
    optimization: {
        minimizer: [
          new TerserPlugin({
            // ãªã‚“ã§ã“ã‚Œã ã‘ã€Œoptimizationã€ã«ã„ã‚‹ã‚“ï¼Ÿï¼Ÿ
            // ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ–¹ã«å…¥ã£ã¦ã‚‚ã‚ˆãã­ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
            // Terse
            // çŸ­ãåˆ‡ã‚‹
            extractComments: false,
            // extract
            // æŠ½å‡ºã™ã‚‹
            // terserOptions: {
            //   compress: {
            //     drop_console: true,
            //     // console.logå‰Šé™¤ã—ã¦ãã‚Œã‚‹
            //     // ã„ã‚„å‰Šé™¤ã•ã‚Œã‚‹ã¨ã¾ãšã„ã‹ã‚‰æ¶ˆã™ã½ã‚ˆ
            //   },
            // },
          }),
        ],
    }
};
console.log('ã«ã‚ƒã€œ');
// ã“ã‚ŒçœŸã£å…ˆã«å®Ÿè¡Œï¼Ÿã•ã‚Œã‚‹ã‚“ã‚„ãªã€œ

imagemin(['src/images/**/*.{jpg,png,gif,svg}'], {
  plugins: [
    imageminMozjpeg({ quality: 80 }),
    imageminPngquant({ quality: [.65, .8] }),
    // https://qiita.com/hibikikudo/items/2c82119ac5acf9cb3394
    // imagemin-pngquant@7.0.0ã‹ã‚‰optionã®æ›¸ãæ–¹ãŒå¤‰ã‚ã£ã¦ã‚‹ã‹ã‚‰æ³¨æ„
    // çŸ¥ã‚‹ã‹ãƒœã‚±ã¶ã¡æ®ºã™ã
    imageminGifsicle(),
    // imageminSvgo()
    // ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãªã
  ],
  replaceOutputDir: output => {
    return output.replace(/images\//, '../dist/images/');
    // ã‚„ã£ãŸã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜­
    // ãŠå‰ã®è¨€ã„ãŸã„ã“ã¨ã¯å®Œå…¨ã«ã‚ã‹ã£ãŸ
    // ã“ã‚Œsrcã®imagesã‚’èµ·ç‚¹ã«ã—ãŸãƒ‘ã‚¹ãªã‚“ã‚„ã­
  }
}).then(() => {
  console.log('Images optimized');
});
